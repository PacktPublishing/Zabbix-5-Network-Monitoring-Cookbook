<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.2</version>
    <date>2020-12-18T10:53:29Z</date>
    <groups>
        <group>
            <name>Azure</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Azure_DB_Metrics</template>
            <name>Azure_DB_Metrics</name>
            <groups>
                <group>
                    <name>Azure</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Connections</name>
                </application>
                <application>
                    <name>CPU</name>
                </application>
                <application>
                    <name>IO</name>
                </application>
                <application>
                    <name>Memory</name>
                </application>
                <application>
                    <name>Network</name>
                </application>
                <application>
                    <name>Storage</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Active connections</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},active_connections]</key>
                    <delay>5m</delay>
                    <units>connections</units>
                    <applications>
                        <application>
                            <name>Connections</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].average</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Failed connections</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},connections_failed]</key>
                    <delay>5m</delay>
                    <units>connections</units>
                    <applications>
                        <application>
                            <name>Connections</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].average</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>CPU load</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},cpu_percent]</key>
                    <delay>5m</delay>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].average</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)\.(\d+)</parameter>
                                <parameter>\1.\2</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>IO Consumption</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},io_consumption_percent]</key>
                    <delay>5m</delay>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <applications>
                        <application>
                            <name>IO</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].average</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)\.(\d+)</parameter>
                                <parameter>\1.\2</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Memory usage</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},memory_percent]</key>
                    <delay>5m</delay>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].average</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)\.(\d+)</parameter>
                                <parameter>\1.\2</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Outbound network traffic</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},network_bytes_egress]</key>
                    <delay>5m</delay>
                    <units>bps</units>
                    <applications>
                        <application>
                            <name>Network</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].total</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Inbound network traffic</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},network_bytes_ingress]</key>
                    <delay>5m</delay>
                    <units>bps</units>
                    <applications>
                        <application>
                            <name>Network</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].total</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Total Serverlog Storage</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},serverlog_storage_limit]</key>
                    <delay>5m</delay>
                    <units>Bytes</units>
                    <applications>
                        <application>
                            <name>Storage</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].maximum</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Used Serverlog Storage</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},serverlog_storage_usage]</key>
                    <delay>5m</delay>
                    <units>Bytes</units>
                    <applications>
                        <application>
                            <name>Storage</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].average</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Total Storage</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},storage_limit]</key>
                    <delay>5m</delay>
                    <units>Bytes</units>
                    <applications>
                        <application>
                            <name>Storage</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].maximum</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Used Storage(percent)</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},storage_percent]</key>
                    <delay>5m</delay>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <applications>
                        <application>
                            <name>Storage</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].average</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)\.(\d+)</parameter>
                                <parameter>\1.\2</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Used Storage</name>
                    <type>EXTERNAL</type>
                    <key>azure_script.sh[{$ID},storage_used]</key>
                    <delay>5m</delay>
                    <units>Bytes</units>
                    <applications>
                        <application>
                            <name>Storage</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value[*].timeseries[*].data[*].average</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(\d+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </item>
            </items>
        </template>
    </templates>
</zabbix_export>
